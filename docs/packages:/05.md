**Package 05: Frontend**

**Goal:** React app with auth, three portfolio views, asset/entry forms, CSV import wizard.

**Stack:**
- React 19 + TypeScript + Vite
- Tailwind CSS
- Shadcn/UI (tables, modals, dropdowns, form inputs)
- React Hook Form + Zod (form state + validation)
- `@tanstack/react-query` for data fetching
- `@clerk/clerk-react` for auth

**File structure:**
```
src/
├── components/        # Sidebar, Header, Table, Modal, forms
├── views/             # Performance, RollForward, Holdings
├── api.ts             # All fetch calls
├── hooks.ts           # All hooks
├── utils.ts           # Formatters
└── App.tsx
```

**Visual design (non-negotiable):**
- Background: `#f8f9fa`, sidebar: `#1e293b`
- Accent: teal `#0d9488` (selections, positive values only)
- Negative values: `#dc2626`, in parentheses — `($12,450.00)`
- Numbers: monospace, right-aligned, 2 decimals for currency, 1 for percent
- Staleness badges: green dot <30 days, yellow 30-60, red >60
- Tables: 40px row height, `#e2e5e9` borders, no zebra striping

**Screens:**
1. **Login** — Clerk `<SignIn />` component
2. **Dashboard** — Sidebar (family picker if MFO, nav), main area with tabs
3. **Portfolio tabs** — Same data from `/views/portfolio`, different grouping/display
4. **Asset detail modal** — Current value (original currency + base currency equivalent), quantity, entry history
5. **Mark Value form** — date, value → POST `/entries/single`
6. **Transaction form** — date, amount, cash account picker → POST `/entries/transaction`
7. **Import wizard** — Step 1: assets CSV, Step 2: transactions CSV (optional)

**Acceptance criteria:**
1. Unauthenticated → redirected to login
2. First login → sees empty dashboard with import prompt
3. Family picker shown only when >1 family exists
4. Tabs switch views without refetching (same data, different presentation)
5. Forms show loading state, wait for 200, then update — no optimistic updates
6. Import wizard: preview table with row errors highlighted, cannot proceed until errors fixed
7. Negative values display in red with parentheses everywhere
8. Asset detail shows value in both original currency and tenant base currency
9. TWR shows "Estimated" badge when twr_quality is "estimated"

**Gotchas:**
- Frontend never decides how many entries get written — endpoint choice (`/single` vs `/transaction`) encodes that
- Don't build in-browser CSV editing — user fixes in Excel, re-uploads
- Clerk token passed in Authorization header to all API calls
- No emojis, minimal formatting — power-user tool, not consumer app